<ng-container *ngIf="data">
    <span *ngIf="data.number > 0" class="verseNumber">{{data.verseLabel}}</span>

    <ng-container *ngFor="let text of data.text; let i = index; let isFirst = first; let isLast = last">

        <div *ngIf="shouldDisplayChapterNumber(data, text, i, isLast)" class="chapterNumber">{{data.chapterNumber}}
        </div>

        <span class="verseText" >
            <!-- If the previous node was a quote node and the current one is not, do a line break 
            <span *ngIf="text.type !== 'quote' && !isFirst && data.text[i-1].type === 'quote'"><br></span>-->
            <ng-container *ngIf="!isInSection(data.text, i)">

                <span *ngIf="text.type === 'text'">{{text.text}}</span>

                <div *ngIf="text.type === 'paragraph' && data.verseLabel !== 'front' ">
                </div>

                <div *ngIf="isLast && text.type === 'quote'">
                </div>

                <span *ngIf="text.type === 'paragraph' && !isFirst && isLast && chapterNumberIndex !== i"
                   >
                   <div></div>
                   <span #paragraph [ngClass]="{'indent': !checkIfIsTouchingChapterNumber(paragraph)}">{{text.text}}</span>
                </span>

                <span *ngIf="text.type === 'paragraph' && data.number > 0 && !(!isFirst && isLast && chapterNumberIndex !== i) &&
    (
        (data.text[i-1]?.type !== 'section' && data.text[i-1]?.type !== 'references' && (data.text[i-1]?.type !== 'paragraph' || (data.text[i-1]?.type === 'paragraph' && text.text.length > 2)))
    || data.bookId === 'psa')">{{text.text}}</span>

                <p *ngIf="text.type === 'section' && (text.tag === 's1' || text.tag === 'ms')">
                <h3 *ngIf="text.type === 'section' && (text.tag === 's1' || text.tag === 'ms')">{{text.text}}</h3>

                <verse-section *ngIf="text.type === 'section' && text.tag=== 's2'" [data]="getDataForSection(i)"
                    [changeLine]="chapterNumberIndex !== i && data.text[i-1].type !== 'section'"></verse-section>

            </ng-container>
            <span class="quote" *ngIf="text.type === 'quote'">
                <div></div>
                <span #quote  [ngClass]="{'indent': !checkIfIsTouchingChapterNumber(quote)}">{{text.text}}</span>
            </span>
        </span>
    </ng-container>
</ng-container>